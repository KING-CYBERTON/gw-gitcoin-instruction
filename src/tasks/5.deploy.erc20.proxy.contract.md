# 5. Deploy the ERC20 Proxy Contract for the Deposited SUDT

To use bridged ETH or other tokens transferred to Nervos Layer 2 you need to deploy a special ERC20 Proxy smart contract to interact with them. This smart contract has been prepared by the Nervos team and it overrides token balance and transfer methods so they both work with SUDTs bridged to Layer 2. Because open-source is at the heart of the whole Nervos multi-layer architecture you can browse its full Solidity code [here](https://github.com/nervosnetwork/godwoken-polyjuice/blob/main/solidity/erc20/SudtERC20Proxy.sol).

To deploy ERC20 Proxy smart contract you need to have Layer 2 SUDT ID. You can get it as a result of depositing SUDT to Layer 2 via account-cli tool.

If you don't have token or its Layer 2 ID yet, follow ["Issue an SUDT Token on Layer 1, then Deposit it to Polyjuice on Layer 2"](./4.issue.sudt.deposit.md) tutorial to create and deposit a token.


## 1. Clone and Setup the Gitcoin Task Instruction Examples

In this step you have to clone the Gitcoin Task Instructions examples repository, which contains the example code required by the tasks. The code we will be working with in this step will compile your smart contract and deploy it. This uses the original versions of Web3.js and Truffle for Ethereum, with only a small difference in that they use a custom Web3.js provider.

Execute following commands to clone the Git repository and install the dependencies:

```sh
git clone https://github.com/kuzirashi/gw-gitcoin-instruction
cd gw-gitcoin-instruction/src/examples/5-erc20-proxy
yarn
```

## 2. Compile the Smart Contract and Copy the Artifact

Before you deploy a smart-contract you need to compile it. Our instructions will show you how to quickly compile a smart-contract using the Truffle compiler.

The SUDT-ERC20 Proxy Solidity smart contract below is `SudtERC20Proxy.sol`, and it is located in the [src/examples/5-erc20-proxy/contracts/SudtERC20Proxy.sol](../examples/5-erc20-proxy/contracts/SudtERC20Proxy.sol) file.

The command below can be used to compile the Solidity into EVM bytecode using the Truffle compiler. This process will use Docker. If you do not have Docker installed, please revisit the [task setup and requirements](../task-setup-and-requirements/task-setup-and-requirements.md) page.

```sh
yarn compile
```

After the command is complete you will find the compiled file in the `build/contracts` directory. ie: `src/examples/5-erc20-proxy/build/contracts/SudtERC20Proxy.json`

## 3. Deploy a Smart Contract Using Web3.js

In the [`/src/examples/5-erc20-proxy/` directory](../examples/5-erc20-proxy/) you will find everything needed to deploy a SUDT-ERC20 proxy smart contract to Nervos Layer 2.

First, update the Ethereum private key in the file [/src/examples/5-erc20-proxy/index.js](../examples/5-erc20-proxy/index.js). Replace the value of the `ACCOUNT_PRIVATE_KEY` constant with Ethereum private key that you recorded earlier. This should be the private key that corresponds with the Ethereum account that was funded previously.

Run the [/src/examples/5-erc20-proxy/index.js](../examples/5-erc20-proxy/index.js) script via console using the following commands:

```sh
cd /src/examples/5-erc20-proxy
yarn
node index.js
```

After running the command, the contract should deploy without any errors. You will be presented with a transaction hash, and an Ethereum contract address. The transaction hash is provided by Godwoken, and Ethereum contract address is provided by Polyjuice. Keep track of these values as they will be needed in the future tasks and for task submission.

<details>
<summary>Example Output</summary>

```txt
âžœ node index.js
Using ETH address: 0xD173313A51f8fc37BcF67569b463abd89d81844f
Deploying contract...
Transaction hash: 0x7684fb90dbcb5da5a51baf3882c4dffeb13daf0798b0e6aa2d7d6cdd5ad77470
Deployed contract address: 0xe7337B058396526303f2131eD320FeDD12C4dc19
```

</details>