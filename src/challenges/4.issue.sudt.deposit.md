# 4. Issue a Layer 1 SUDT token, then deposit it into Layer 2

This challenge revolves around issuing a token on Nervos Layer 1 and then moving it into Layer 2 with EVM support. Token on Layer 1 complies with SUDT standard, which is one of the simplest forms of asset on Nervos. When you move such token to Layer 2 it will become an ERC20 token, which is the most popular standard on Ethereum Virtual Machine blockchains.

The motivation for moving tokens to Layer 2 is enabling EVM support for your token - being able to use your token with smart-contracts and apps that already work on Ethereum Virtual Machine, but also scaling your application - meaning your application can process more transactions in the same time.

Imagine all the possibilities moving tokens from other blockchains such as Ethereum, Cardano and Tron to Nervos and then depositing them to Layer 2 and interacting with them can enable. One of more obvious use cases for that would be exchanging them using a decentralized exchange.

**Requirements**

Before your start make sure you've correctly setup your developer environment. For information about system requirements and challenge setup please [check this article](/src/challenge-setup-and-requirements/challenge-setup-and-requirements.md).

**Introduction**

Below you will find various Nervos ecosystem Component Tutorials mixed with Challenge Instructions where you need a glue to connect two Component Tutorials together. These instructions executed in the order specified below will guide you to completing this challenge.

## Challenge Instructions

We will start with setting up a Nervos Layer 1 wallet - which is a place where your Layer 1 assets live. The wallet that we will use also can connect to various applications. The application we will use called **SUDT CLI** will need your private key to send transactions (issue token on Layer 1). 

Usually you need to be very careful what you do with your private key, but here we operate on testnet (funds have no value) and we use open-source (all code is public) tools locally. You're safe.

## [1. Setup Layer 1 account with funds](/src/component-tutorials/1.setup.keypering.with.funds.md)

After wallet is setup with funds, you can copy private key and use it with SUDT command-line interface to actually issue a token on Nervos Layer 1!

## [2. Issue SUDT using command-line interface](/src/component-tutorials/9.issue.sudt.cli.md)

## 3. Prepare a tool to deposit SUDT into Layer 2

```sh
git clone https://github.com/nervosnetwork/godwoken-examples
yarn && yarn run build-all
yarn run generate-testnet-configs
```

## 4. Deposit Layer 1 tokens (SUDT standard) to create a Layer 2 account

To deposit SUDT into Layer 2 execute following command in `godwoken-examples` directory, but first replace 5 variables with the values matching your wallet and node information.

```sh
node ./packages/tools/lib/account-cli.js deposit-sudt -m 400 -s <INSERT_TOKEN_SCRIPT_ARGS> -p <INSERT_PRIVATE_KEY> -l <INSERT_ETH_ADDRESS> -r <INSERT_TESTNET_RPC_URL> -d <INSERT_TESTNET_INDEXER_URL>
```

Variables:
1. `<INSERT_TOKEN_SCRIPT_ARGS>` - "SUDT Type Args" from SUDT CLI tool (you can see it after you issue token or when you call balance action). If you're unsure how to get it please revisit [Issue SUDT using command-line interface](/src/component-tutorials/9.issue.sudt.cli.md) tutorial.
2. `<INSERT_PRIVATE_KEY>` - private key to your account, the instructions how to get it are in [step 1 of this instruction](#1-setup-layer-1-account-with-funds)
3. `<INSERT_ETH_ADDRESS>` - the address of the account from MetaMask that you want to receive funds on Layer 2 to. Go to MetaMask, create account if you haven't already and copy the address.
4. `<INSERT_TESTNET_RPC_URL>` - testnet node RPC URL, you can use existing one that we provide: `http://3.235.223.161:18114` or you can setup your own local node (it takes time to sync though)
5. `<INSERT_TESTNET_INDEXER_URL>` - testnet indexer URL, you can use existing one that we provide: `http://3.235.223.161:18116` or you can setup your own by using [ckb-indexer repository](https://github.com/nervosnetwork/ckb-indexer/)

---

Example final command:

``` sh
node ./packages/tools/lib/account-cli.js deposit-sudt -m 100 -s 0x6f33df7e3fffb47794f9ca37643118ba79207ac92596a0555e9038828e547357 -p 0x6cd5e7be2f6504aa5ae7c0c04178d8f47b7cfc63b71d95d9e6282f5b090431bf -l 0xD173313A51f8fc37BcF67569b463abd89d81844f
```

You have to wait for Lumos indexer to sync with testnet first. It might take a lot of time (up to few hours). Please be patient.

<img src="../images/godwoken-examples-deposit-sudt.png" width="100%" />

**Potential errors and solutions**

If you get an error: "Not enough capacity in from infos!" then it means your account on Layer 1 (that you passed access to via private key) doesn't have enough funds to perform an operation.

If you get an error: "Not enough amount in from infos!" then it means you either didn't issue tokens on Layer 1 before running this command, or you've issued less than you want to deposit to Layer 2 now.